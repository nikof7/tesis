<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Kernels de actividad | Tesis</title>
  <meta name="description" content="Donde se irá desarrollando la tésis." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Kernels de actividad | Tesis" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Donde se irá desarrollando la tésis." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Kernels de actividad | Tesis" />
  
  <meta name="twitter:description" content="Donde se irá desarrollando la tésis." />
  

<meta name="author" content="Nicolás Fernández-Sauleda" />


<meta name="date" content="2024-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="variables-climáticas.html"/>
<link rel="next" href="exploración-general-de-modelos.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tesis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Acerca de</a></li>
<li class="chapter" data-level="2" data-path="carga-de-datos.html"><a href="carga-de-datos.html"><i class="fa fa-check"></i><b>2</b> Carga de Datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="carga-de-datos.html"><a href="carga-de-datos.html#observaciones-en-cámaras-trampa"><i class="fa fa-check"></i><b>2.1</b> Observaciones en Cámaras Trampa</a></li>
<li class="chapter" data-level="2.2" data-path="carga-de-datos.html"><a href="carga-de-datos.html#preparación-de-datos"><i class="fa fa-check"></i><b>2.2</b> Preparación de Datos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploración-inicial-de-los-datos.html"><a href="exploración-inicial-de-los-datos.html"><i class="fa fa-check"></i><b>3</b> Exploración inicial de los datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploración-inicial-de-los-datos.html"><a href="exploración-inicial-de-los-datos.html#cantidad-de-registros-independientes-por-especie-y-área"><i class="fa fa-check"></i><b>3.1</b> Cantidad de registros independientes por especie y área</a></li>
<li class="chapter" data-level="3.2" data-path="exploración-inicial-de-los-datos.html"><a href="exploración-inicial-de-los-datos.html#sistemas-y-cámaras"><i class="fa fa-check"></i><b>3.2</b> Sistemas y cámaras</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="hora-solar.html"><a href="hora-solar.html"><i class="fa fa-check"></i><b>4</b> Hora solar</a>
<ul>
<li class="chapter" data-level="4.1" data-path="hora-solar.html"><a href="hora-solar.html#paquete-circular"><i class="fa fa-check"></i><b>4.1</b> Paquete circular</a></li>
<li class="chapter" data-level="4.2" data-path="hora-solar.html"><a href="hora-solar.html#paquete-activity"><i class="fa fa-check"></i><b>4.2</b> Paquete activity</a></li>
<li class="chapter" data-level="4.3" data-path="hora-solar.html"><a href="hora-solar.html#comparación-de-resultados"><i class="fa fa-check"></i><b>4.3</b> Comparación de resultados</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="hora-solar.html"><a href="hora-solar.html#conclusión"><i class="fa fa-check"></i><b>4.3.1</b> Conclusión</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="categorías-de-nicho-temporal.html"><a href="categorías-de-nicho-temporal.html"><i class="fa fa-check"></i><b>5</b> Categorías de nicho temporal</a>
<ul>
<li class="chapter" data-level="5.1" data-path="categorías-de-nicho-temporal.html"><a href="categorías-de-nicho-temporal.html#noche-día-y-crepúsculo"><i class="fa fa-check"></i><b>5.1</b> Noche, Día y Crepúsculo</a></li>
<li class="chapter" data-level="5.2" data-path="categorías-de-nicho-temporal.html"><a href="categorías-de-nicho-temporal.html#diurno-y-nocturno"><i class="fa fa-check"></i><b>5.2</b> Diurno y nocturno</a></li>
<li class="chapter" data-level="5.3" data-path="categorías-de-nicho-temporal.html"><a href="categorías-de-nicho-temporal.html#conclusión-1"><i class="fa fa-check"></i><b>5.3</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="fase-lunar.html"><a href="fase-lunar.html"><i class="fa fa-check"></i><b>6</b> Fase lunar</a>
<ul>
<li class="chapter" data-level="6.1" data-path="fase-lunar.html"><a href="fase-lunar.html#preparación-de-datos-1"><i class="fa fa-check"></i><b>6.1</b> Preparación de datos</a></li>
<li class="chapter" data-level="6.2" data-path="fase-lunar.html"><a href="fase-lunar.html#iluminación-de-la-luna"><i class="fa fa-check"></i><b>6.2</b> Iluminación de la Luna</a></li>
<li class="chapter" data-level="6.3" data-path="fase-lunar.html"><a href="fase-lunar.html#overlap-utilizando-fase-lunar"><i class="fa fa-check"></i><b>6.3</b> Overlap utilizando fase lunar</a></li>
<li class="chapter" data-level="6.4" data-path="fase-lunar.html"><a href="fase-lunar.html#kernels-de-superposición-para-pares-de-especies"><i class="fa fa-check"></i><b>6.4</b> Kernels de Superposición para Pares de Especies</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tasa-de-registro-vacunos-y-perros-domésticos.html"><a href="tasa-de-registro-vacunos-y-perros-domésticos.html"><i class="fa fa-check"></i><b>7</b> Tasa de registro vacunos y perros domésticos</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="tasa-de-registro-vacunos-y-perros-domésticos.html"><a href="tasa-de-registro-vacunos-y-perros-domésticos.html#nivel-sistema"><i class="fa fa-check"></i><b>7.0.1</b> Nivel sistema</a></li>
<li class="chapter" data-level="7.0.2" data-path="tasa-de-registro-vacunos-y-perros-domésticos.html"><a href="tasa-de-registro-vacunos-y-perros-domésticos.html#nivel-camara"><i class="fa fa-check"></i><b>7.0.2</b> Nivel camara</a></li>
<li class="chapter" data-level="7.0.3" data-path="tasa-de-registro-vacunos-y-perros-domésticos.html"><a href="tasa-de-registro-vacunos-y-perros-domésticos.html#tabla-única"><i class="fa fa-check"></i><b>7.0.3</b> Tabla única</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="coberturas.html"><a href="coberturas.html"><i class="fa fa-check"></i><b>8</b> Coberturas</a>
<ul>
<li class="chapter" data-level="8.0.1" data-path="coberturas.html"><a href="coberturas.html#clases-de-cobertura-simples"><i class="fa fa-check"></i><b>8.0.1</b> Clases de Cobertura Simples</a></li>
<li class="chapter" data-level="8.0.2" data-path="coberturas.html"><a href="coberturas.html#clases-de-cobertura-agregadas"><i class="fa fa-check"></i><b>8.0.2</b> Clases de Cobertura Agregadas</a></li>
<li class="chapter" data-level="8.0.3" data-path="coberturas.html"><a href="coberturas.html#procesamiento-de-datos"><i class="fa fa-check"></i><b>8.0.3</b> Procesamiento de datos</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="variables-climáticas.html"><a href="variables-climáticas.html"><i class="fa fa-check"></i><b>9</b> Variables climáticas</a>
<ul>
<li class="chapter" data-level="9.1" data-path="variables-climáticas.html"><a href="variables-climáticas.html#procesamiento-de-datos-1"><i class="fa fa-check"></i><b>9.1</b> Procesamiento de datos</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="variables-climáticas.html"><a href="variables-climáticas.html#temperatura"><i class="fa fa-check"></i><b>9.1.1</b> Temperatura</a></li>
<li class="chapter" data-level="9.1.2" data-path="variables-climáticas.html"><a href="variables-climáticas.html#precipitaciones"><i class="fa fa-check"></i><b>9.1.2</b> Precipitaciones</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="variables-climáticas.html"><a href="variables-climáticas.html#alternativa-open-meteo"><i class="fa fa-check"></i><b>9.2</b> Alternativa open-meteo</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="kernels-de-actividad.html"><a href="kernels-de-actividad.html"><i class="fa fa-check"></i><b>10</b> Kernels de actividad</a>
<ul>
<li class="chapter" data-level="10.1" data-path="kernels-de-actividad.html"><a href="kernels-de-actividad.html#exploración-de-estresores-a-nivel-de-cámara-y-sistema"><i class="fa fa-check"></i><b>10.1</b> Exploración de estresores a nivel de cámara y sistema</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="kernels-de-actividad.html"><a href="kernels-de-actividad.html#conclusión-2"><i class="fa fa-check"></i><b>10.1.1</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="kernels-de-actividad.html"><a href="kernels-de-actividad.html#densidades-de-kernel"><i class="fa fa-check"></i><b>10.2</b> Densidades de kernel</a></li>
<li class="chapter" data-level="10.3" data-path="kernels-de-actividad.html"><a href="kernels-de-actividad.html#diseño-y-generación-de-gráficos"><i class="fa fa-check"></i><b>10.3</b> Diseño y generación de gráficos</a></li>
<li class="chapter" data-level="10.4" data-path="kernels-de-actividad.html"><a href="kernels-de-actividad.html#calculos-de-overlap"><i class="fa fa-check"></i><b>10.4</b> Calculos de overlap</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="exploración-general-de-modelos.html"><a href="exploración-general-de-modelos.html"><i class="fa fa-check"></i><b>11</b> Exploración general de modelos</a>
<ul>
<li class="chapter" data-level="11.1" data-path="exploración-general-de-modelos.html"><a href="exploración-general-de-modelos.html#modelo-lineal-simple"><i class="fa fa-check"></i><b>11.1</b> Modelo lineal simple</a></li>
<li class="chapter" data-level="11.2" data-path="exploración-general-de-modelos.html"><a href="exploración-general-de-modelos.html#incluir-interacciones"><i class="fa fa-check"></i><b>11.2</b> Incluir interacciones</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html"><i class="fa fa-check"></i><b>12</b> Modelos para Jenni</a>
<ul>
<li class="chapter" data-level="12.1" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html#preparación-de-datos-2"><i class="fa fa-check"></i><b>12.1</b> Preparación de datos</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html#tasa-de-registro"><i class="fa fa-check"></i><b>12.1.1</b> Tasa de registro</a></li>
<li class="chapter" data-level="12.1.2" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html#estado-de-los-datos"><i class="fa fa-check"></i><b>12.1.2</b> Estado de los datos</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html#modelo-generalidades"><i class="fa fa-check"></i><b>12.2</b> Modelo generalidades</a></li>
<li class="chapter" data-level="12.3" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html#modelo-utilizando-brms"><i class="fa fa-check"></i><b>12.3</b> Modelo utilizando brms</a></li>
<li class="chapter" data-level="12.4" data-path="modelos-para-jenni.html"><a href="modelos-para-jenni.html#modelo-con-interacciones"><i class="fa fa-check"></i><b>12.4</b> Modelo con interacciones</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="anexo-1.html"><a href="anexo-1.html"><i class="fa fa-check"></i><b>13</b> Anexo 1</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/nikof7/tesis" target="blank">Nicolás Fernández-Sauleda</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tesis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="kernels-de-actividad" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Kernels de actividad<a href="kernels-de-actividad.html#kernels-de-actividad" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="exploración-de-estresores-a-nivel-de-cámara-y-sistema" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Exploración de estresores a nivel de cámara y sistema<a href="kernels-de-actividad.html#exploración-de-estresores-a-nivel-de-cámara-y-sistema" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En este apartado se explorarán los patrones diarios de actividad de cada especie mediante curvas de densidad de kernel (KDE), evaluando cualitativamente cómo varía la actividad diaria en presencia y ausencia de disturbios.</p>
<p>Para generar los kernels de actividad, se optó por trabajar con un solo nivel del estresor: a nivel de cámara o a nivel de sistema. A nivel de cámara, las tasas de registro se calcularán utilizando los datos específicos de cada cámara, y los datos espaciales, como la proporción de área cerrada, se estimarán en un buffer de 100 metros alrededor de la misma En el nivel de sistema, se aplicará la misma metodología, pero a escala del sistema y con buffers de 500 metros desde el centroide.</p>
<p>Para determinar a qué nivel se va a trabajar se deben categorizar los registros y obtener para cada uno en qué categoría del estresor se encuentra (en presencia o ausencia) para ambos niveles.</p>
<p>En la siguiente tabla se puede ver para cada registro el valor correspodiente para cada categoría (<code>cat_...</code>)</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="kernels-de-actividad.html#cb61-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;./data_processed/datos_procesados_v4.RData&quot;</span>)</span>
<span id="cb61-2"><a href="kernels-de-actividad.html#cb61-2" tabindex="-1"></a></span>
<span id="cb61-3"><a href="kernels-de-actividad.html#cb61-3" tabindex="-1"></a>data_categorized <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb61-4"><a href="kernels-de-actividad.html#cb61-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cat_n_tech_sys =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-5"><a href="kernels-de-actividad.html#cb61-5" tabindex="-1"></a>           n_tech_sys <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb61-6"><a href="kernels-de-actividad.html#cb61-6" tabindex="-1"></a>           n_tech_sys <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb61-7"><a href="kernels-de-actividad.html#cb61-7" tabindex="-1"></a>         ),</span>
<span id="cb61-8"><a href="kernels-de-actividad.html#cb61-8" tabindex="-1"></a>         <span class="at">cat_n_tech_cam =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-9"><a href="kernels-de-actividad.html#cb61-9" tabindex="-1"></a>           n_tech_cam <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb61-10"><a href="kernels-de-actividad.html#cb61-10" tabindex="-1"></a>           n_tech_cam <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb61-11"><a href="kernels-de-actividad.html#cb61-11" tabindex="-1"></a>         ),</span>
<span id="cb61-12"><a href="kernels-de-actividad.html#cb61-12" tabindex="-1"></a>         <span class="at">cat_tr_cfam_sys =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-13"><a href="kernels-de-actividad.html#cb61-13" tabindex="-1"></a>           tr_cfam_sys <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb61-14"><a href="kernels-de-actividad.html#cb61-14" tabindex="-1"></a>           tr_cfam_sys <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb61-15"><a href="kernels-de-actividad.html#cb61-15" tabindex="-1"></a>         ),</span>
<span id="cb61-16"><a href="kernels-de-actividad.html#cb61-16" tabindex="-1"></a>         <span class="at">cat_tr_cfam_cam =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-17"><a href="kernels-de-actividad.html#cb61-17" tabindex="-1"></a>           tr_cfam_cam <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb61-18"><a href="kernels-de-actividad.html#cb61-18" tabindex="-1"></a>           tr_cfam_cam <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb61-19"><a href="kernels-de-actividad.html#cb61-19" tabindex="-1"></a>         ),</span>
<span id="cb61-20"><a href="kernels-de-actividad.html#cb61-20" tabindex="-1"></a>         <span class="at">cat_tr_btau_sys =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-21"><a href="kernels-de-actividad.html#cb61-21" tabindex="-1"></a>           tr_btau_sys <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb61-22"><a href="kernels-de-actividad.html#cb61-22" tabindex="-1"></a>           tr_btau_sys <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb61-23"><a href="kernels-de-actividad.html#cb61-23" tabindex="-1"></a>         ),</span>
<span id="cb61-24"><a href="kernels-de-actividad.html#cb61-24" tabindex="-1"></a>         <span class="at">cat_tr_btau_cam =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-25"><a href="kernels-de-actividad.html#cb61-25" tabindex="-1"></a>           tr_btau_cam <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb61-26"><a href="kernels-de-actividad.html#cb61-26" tabindex="-1"></a>           tr_btau_cam <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb61-27"><a href="kernels-de-actividad.html#cb61-27" tabindex="-1"></a>         )</span>
<span id="cb61-28"><a href="kernels-de-actividad.html#cb61-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb61-29"><a href="kernels-de-actividad.html#cb61-29" tabindex="-1"></a>  <span class="fu">select</span>(site, system, camera, solar, sp, cat_n_tech_cam,cat_n_tech_sys,cat_tr_cfam_cam, cat_tr_cfam_sys, cat_tr_btau_cam,cat_tr_btau_sys)</span>
<span id="cb61-30"><a href="kernels-de-actividad.html#cb61-30" tabindex="-1"></a><span class="fu">paged_table</span>(<span class="fu">head</span>(data_categorized))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["site"],"name":[1],"type":["chr"],"align":["left"]},{"label":["system"],"name":[2],"type":["chr"],"align":["left"]},{"label":["camera"],"name":[3],"type":["chr"],"align":["left"]},{"label":["solar"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["sp"],"name":[5],"type":["chr"],"align":["left"]},{"label":["cat_n_tech_cam"],"name":[6],"type":["chr"],"align":["left"]},{"label":["cat_n_tech_sys"],"name":[7],"type":["chr"],"align":["left"]},{"label":["cat_tr_cfam_cam"],"name":[8],"type":["chr"],"align":["left"]},{"label":["cat_tr_cfam_sys"],"name":[9],"type":["chr"],"align":["left"]},{"label":["cat_tr_btau_cam"],"name":[10],"type":["chr"],"align":["left"]},{"label":["cat_tr_btau_sys"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"SM","2":"SM06","3":"SM06_3","4":"2.135101","5":"Btau","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","_rn_":"1"},{"1":"SM","2":"SM06","3":"SM06_2","4":"3.810810","5":"Btau","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","_rn_":"2"},{"1":"SM","2":"SM01","3":"SM01_1","4":"3.141334","5":"Btau","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","_rn_":"3"},{"1":"SM","2":"SM01","3":"SM01_1","4":"2.182284","5":"Btau","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","_rn_":"4"},{"1":"SM","2":"SM01","3":"SM01_1","4":"5.578795","5":"Btau","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","_rn_":"5"},{"1":"SM","2":"SM01","3":"SM01_1","4":"4.491674","5":"Btau","6":"0","7":"0","8":"0","9":"0","10":"1","11":"1","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Algo importante es contar con suficientes registros dentro de cada categoría, por lo tanto se visualiza esto para cada especie:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="kernels-de-actividad.html#cb62-1" tabindex="-1"></a><span class="co"># Resumir las categorías para n_tech, tr_btau y tr_cfam</span></span>
<span id="cb62-2"><a href="kernels-de-actividad.html#cb62-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> data_categorized <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="kernels-de-actividad.html#cb62-3" tabindex="-1"></a>  <span class="fu">group_by</span>(sp) <span class="sc">%&gt;%</span> </span>
<span id="cb62-4"><a href="kernels-de-actividad.html#cb62-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;cat&quot;</span>), </span>
<span id="cb62-5"><a href="kernels-de-actividad.html#cb62-5" tabindex="-1"></a>                   <span class="fu">list</span>(<span class="at">Ausente =</span> <span class="sc">~</span><span class="fu">sum</span>(. <span class="sc">==</span> <span class="st">&quot;0&quot;</span>), </span>
<span id="cb62-6"><a href="kernels-de-actividad.html#cb62-6" tabindex="-1"></a>                        <span class="at">Presente =</span> <span class="sc">~</span><span class="fu">sum</span>(. <span class="sc">==</span> <span class="st">&quot;1&quot;</span>))))</span>
<span id="cb62-7"><a href="kernels-de-actividad.html#cb62-7" tabindex="-1"></a><span class="fu">paged_table</span>(<span class="fu">head</span>(dat))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sp"],"name":[1],"type":["chr"],"align":["left"]},{"label":["cat_n_tech_cam_Ausente"],"name":[2],"type":["int"],"align":["right"]},{"label":["cat_n_tech_cam_Presente"],"name":[3],"type":["int"],"align":["right"]},{"label":["cat_n_tech_sys_Ausente"],"name":[4],"type":["int"],"align":["right"]},{"label":["cat_n_tech_sys_Presente"],"name":[5],"type":["int"],"align":["right"]},{"label":["cat_tr_cfam_cam_Ausente"],"name":[6],"type":["int"],"align":["right"]},{"label":["cat_tr_cfam_cam_Presente"],"name":[7],"type":["int"],"align":["right"]},{"label":["cat_tr_cfam_sys_Ausente"],"name":[8],"type":["int"],"align":["right"]},{"label":["cat_tr_cfam_sys_Presente"],"name":[9],"type":["int"],"align":["right"]},{"label":["cat_tr_btau_cam_Ausente"],"name":[10],"type":["int"],"align":["right"]},{"label":["cat_tr_btau_cam_Presente"],"name":[11],"type":["int"],"align":["right"]},{"label":["cat_tr_btau_sys_Ausente"],"name":[12],"type":["int"],"align":["right"]},{"label":["cat_tr_btau_sys_Presente"],"name":[13],"type":["int"],"align":["right"]}],"data":[{"1":"Aaxi","2":"572","3":"12","4":"430","5":"154","6":"489","7":"95","8":"489","9":"95","10":"189","11":"395","12":"189","13":"395"},{"1":"Btau","2":"2373","3":"87","4":"1906","5":"554","6":"1442","7":"1018","8":"1442","9":"1018","10":"0","11":"2460","12":"0","13":"2460"},{"1":"Cfam","2":"91","3":"49","4":"45","5":"95","6":"0","7":"140","8":"0","9":"140","10":"14","11":"126","12":"14","13":"126"},{"1":"Ctho","2":"334","3":"59","4":"264","5":"129","6":"264","7":"129","8":"264","9":"129","10":"175","11":"218","12":"175","13":"218"},{"1":"Dnov","2":"200","3":"1","4":"161","5":"40","6":"146","7":"55","8":"146","9":"55","10":"98","11":"103","12":"98","13":"103"},{"1":"Dsep","2":"91","3":"0","4":"88","5":"3","6":"44","7":"47","8":"44","9":"47","10":"33","11":"58","12":"33","13":"58"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="kernels-de-actividad.html#cb63-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="kernels-de-actividad.html#cb63-2" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="kernels-de-actividad.html#cb63-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>sp, </span>
<span id="cb63-4"><a href="kernels-de-actividad.html#cb63-4" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;category&quot;</span>), </span>
<span id="cb63-5"><a href="kernels-de-actividad.html#cb63-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb63-6"><a href="kernels-de-actividad.html#cb63-6" tabindex="-1"></a></span>
<span id="cb63-7"><a href="kernels-de-actividad.html#cb63-7" tabindex="-1"></a><span class="co"># Crear un nuevo campo para la variable</span></span>
<span id="cb63-8"><a href="kernels-de-actividad.html#cb63-8" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb63-9"><a href="kernels-de-actividad.html#cb63-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">case_when</span>(</span>
<span id="cb63-10"><a href="kernels-de-actividad.html#cb63-10" tabindex="-1"></a>    <span class="fu">str_detect</span>(category, <span class="st">&quot;n_tech&quot;</span>) <span class="sc">~</span> <span class="st">&quot;n_tech&quot;</span>,</span>
<span id="cb63-11"><a href="kernels-de-actividad.html#cb63-11" tabindex="-1"></a>    <span class="fu">str_detect</span>(category, <span class="st">&quot;tr_btau&quot;</span>) <span class="sc">~</span> <span class="st">&quot;tr_btau&quot;</span>,</span>
<span id="cb63-12"><a href="kernels-de-actividad.html#cb63-12" tabindex="-1"></a>    <span class="fu">str_detect</span>(category, <span class="st">&quot;tr_cfam&quot;</span>) <span class="sc">~</span> <span class="st">&quot;tr_cfam&quot;</span>,</span>
<span id="cb63-13"><a href="kernels-de-actividad.html#cb63-13" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb63-14"><a href="kernels-de-actividad.html#cb63-14" tabindex="-1"></a>  ))</span>
<span id="cb63-15"><a href="kernels-de-actividad.html#cb63-15" tabindex="-1"></a></span>
<span id="cb63-16"><a href="kernels-de-actividad.html#cb63-16" tabindex="-1"></a><span class="co"># Graficar las tres variables en un solo gráfico usando facet_wrap</span></span>
<span id="cb63-17"><a href="kernels-de-actividad.html#cb63-17" tabindex="-1"></a><span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(sp), <span class="at">y =</span> count, <span class="at">fill =</span> <span class="fu">factor</span>(category))) <span class="sc">+</span></span>
<span id="cb63-18"><a href="kernels-de-actividad.html#cb63-18" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb63-19"><a href="kernels-de-actividad.html#cb63-19" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>variable, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span>  <span class="co"># Crear paneles para cada variable</span></span>
<span id="cb63-20"><a href="kernels-de-actividad.html#cb63-20" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Proporción de Registros&quot;</span>,</span>
<span id="cb63-21"><a href="kernels-de-actividad.html#cb63-21" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Por especie para cada categoría, contrastando a nivel de sistema y de cámaras&quot;</span>,</span>
<span id="cb63-22"><a href="kernels-de-actividad.html#cb63-22" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Especies&quot;</span>, </span>
<span id="cb63-23"><a href="kernels-de-actividad.html#cb63-23" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Proporción&quot;</span>, </span>
<span id="cb63-24"><a href="kernels-de-actividad.html#cb63-24" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;Categoría&quot;</span>) <span class="sc">+</span></span>
<span id="cb63-25"><a href="kernels-de-actividad.html#cb63-25" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>), <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb63-26"><a href="kernels-de-actividad.html#cb63-26" tabindex="-1"></a>   <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;#a8dadc&quot;</span>, <span class="st">&quot;#457b9d&quot;</span>), <span class="at">length.out =</span> <span class="fu">length</span>(<span class="fu">unique</span>(dat<span class="sc">$</span>category))))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
<p><span style="background-color: #a8dadc;">Este color es para la presencia del estresor</span> <span style="background-color: #457b9d;color: white;"> y este para la ausencia</span>
Por categría hay “dos graficos” el de arriba es a nivel de camara y abajo a nivel de sistema.</p>
<div id="conclusión-2" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Conclusión<a href="kernels-de-actividad.html#conclusión-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En esta exploración se puede notar que la cantidad de registros por categoría se distribuye mejor si se trabaja a nivel de sistema. Por lo tanto a este nivel se va a trabajar.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="kernels-de-actividad.html#cb64-1" tabindex="-1"></a>data_categorized <span class="ot">&lt;-</span> data_categorized <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="kernels-de-actividad.html#cb64-2" tabindex="-1"></a>  <span class="fu">select</span>(site, system, camera, solar, sp, <span class="fu">ends_with</span>(<span class="st">&quot;_sys&quot;</span>))</span>
<span id="cb64-3"><a href="kernels-de-actividad.html#cb64-3" tabindex="-1"></a><span class="fu">paged_table</span>(<span class="fu">head</span>(data_categorized))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["site"],"name":[1],"type":["chr"],"align":["left"]},{"label":["system"],"name":[2],"type":["chr"],"align":["left"]},{"label":["camera"],"name":[3],"type":["chr"],"align":["left"]},{"label":["solar"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["sp"],"name":[5],"type":["chr"],"align":["left"]},{"label":["cat_n_tech_sys"],"name":[6],"type":["chr"],"align":["left"]},{"label":["cat_tr_cfam_sys"],"name":[7],"type":["chr"],"align":["left"]},{"label":["cat_tr_btau_sys"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"SM","2":"SM06","3":"SM06_3","4":"2.135101","5":"Btau","6":"0","7":"0","8":"1","_rn_":"1"},{"1":"SM","2":"SM06","3":"SM06_2","4":"3.810810","5":"Btau","6":"0","7":"0","8":"1","_rn_":"2"},{"1":"SM","2":"SM01","3":"SM01_1","4":"3.141334","5":"Btau","6":"0","7":"0","8":"1","_rn_":"3"},{"1":"SM","2":"SM01","3":"SM01_1","4":"2.182284","5":"Btau","6":"0","7":"0","8":"1","_rn_":"4"},{"1":"SM","2":"SM01","3":"SM01_1","4":"5.578795","5":"Btau","6":"0","7":"0","8":"1","_rn_":"5"},{"1":"SM","2":"SM01","3":"SM01_1","4":"4.491674","5":"Btau","6":"0","7":"0","8":"1","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="densidades-de-kernel" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Densidades de kernel<a href="kernels-de-actividad.html#densidades-de-kernel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="kernels-de-actividad.html#cb65-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;./data_processed/datos_procesados_v4.RData&quot;</span>)</span>
<span id="cb65-2"><a href="kernels-de-actividad.html#cb65-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ctho&quot;</span>, <span class="st">&quot;Lgym&quot;</span>, <span class="st">&quot;Lgeo&quot;</span>, <span class="st">&quot;Lwie&quot;</span>, <span class="st">&quot;Dnov&quot;</span>, <span class="st">&quot;Dsep&quot;</span>, <span class="st">&quot;Aaxi&quot;</span>, <span class="st">&quot;Mgou&quot;</span>))</span></code></pre></div>
<p>Se crea una función para categorizar las variables, lo cual permite clasificar la presencia y ausencia del estresor para cada especie y calcular las respectivas densidades de kernel. El objetivo es obtener, para cada especie, curvas de densidad de kernel que reflejen la actividad en condiciones de presencia y ausencia para cada uno de los tres estresores.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="kernels-de-actividad.html#cb66-1" tabindex="-1"></a><span class="co"># Función para categorizar las variable y calcular las densidades</span></span>
<span id="cb66-2"><a href="kernels-de-actividad.html#cb66-2" tabindex="-1"></a>calculate_density <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb66-3"><a href="kernels-de-actividad.html#cb66-3" tabindex="-1"></a>  </span>
<span id="cb66-4"><a href="kernels-de-actividad.html#cb66-4" tabindex="-1"></a>  <span class="co"># Definir el punto de corte para las categorías</span></span>
<span id="cb66-5"><a href="kernels-de-actividad.html#cb66-5" tabindex="-1"></a>  half_value  <span class="ot">&lt;-</span> <span class="fu">max</span>(data[[var_name]]) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb66-6"><a href="kernels-de-actividad.html#cb66-6" tabindex="-1"></a></span>
<span id="cb66-7"><a href="kernels-de-actividad.html#cb66-7" tabindex="-1"></a>  <span class="co"># Crear una nueva columna para la categoría</span></span>
<span id="cb66-8"><a href="kernels-de-actividad.html#cb66-8" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb66-9"><a href="kernels-de-actividad.html#cb66-9" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb66-10"><a href="kernels-de-actividad.html#cb66-10" tabindex="-1"></a>      <span class="sc">!!</span><span class="fu">sym</span>(var_name) <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb66-11"><a href="kernels-de-actividad.html#cb66-11" tabindex="-1"></a>      <span class="sc">!!</span><span class="fu">sym</span>(var_name) <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb66-12"><a href="kernels-de-actividad.html#cb66-12" tabindex="-1"></a>    ))</span>
<span id="cb66-13"><a href="kernels-de-actividad.html#cb66-13" tabindex="-1"></a></span>
<span id="cb66-14"><a href="kernels-de-actividad.html#cb66-14" tabindex="-1"></a>  <span class="co"># Extraer las horas solares para cada categoría</span></span>
<span id="cb66-15"><a href="kernels-de-actividad.html#cb66-15" tabindex="-1"></a>  dat_0 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(cat <span class="sc">==</span> <span class="st">&quot;0&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(solar)</span>
<span id="cb66-16"><a href="kernels-de-actividad.html#cb66-16" tabindex="-1"></a>  dat_above_0 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(cat <span class="sc">==</span> <span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(solar)</span>
<span id="cb66-17"><a href="kernels-de-actividad.html#cb66-17" tabindex="-1"></a></span>
<span id="cb66-18"><a href="kernels-de-actividad.html#cb66-18" tabindex="-1"></a>  <span class="co"># Ajuste de la densidad para cada conjunto de datos, sólo si hay suficientes datos</span></span>
<span id="cb66-19"><a href="kernels-de-actividad.html#cb66-19" tabindex="-1"></a>  act_0 <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(dat_0) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="fu">fitact</span>(dat_0) <span class="cf">else</span> <span class="cn">NULL</span></span>
<span id="cb66-20"><a href="kernels-de-actividad.html#cb66-20" tabindex="-1"></a>  act_above_0 <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(dat_above_0) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="fu">fitact</span>(dat_above_0) <span class="cf">else</span> <span class="cn">NULL</span></span>
<span id="cb66-21"><a href="kernels-de-actividad.html#cb66-21" tabindex="-1"></a></span>
<span id="cb66-22"><a href="kernels-de-actividad.html#cb66-22" tabindex="-1"></a>  <span class="co"># Función para extraer pdf si es válido</span></span>
<span id="cb66-23"><a href="kernels-de-actividad.html#cb66-23" tabindex="-1"></a>  extract_pdf <span class="ot">&lt;-</span> <span class="cf">function</span>(act_obj, category) {</span>
<span id="cb66-24"><a href="kernels-de-actividad.html#cb66-24" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(act_obj) <span class="sc">&amp;&amp;</span> <span class="fu">inherits</span>(act_obj<span class="sc">@</span>pdf, <span class="st">&quot;matrix&quot;</span>)) {</span>
<span id="cb66-25"><a href="kernels-de-actividad.html#cb66-25" tabindex="-1"></a>      <span class="fu">data.frame</span>(</span>
<span id="cb66-26"><a href="kernels-de-actividad.html#cb66-26" tabindex="-1"></a>        <span class="at">angle =</span> act_obj<span class="sc">@</span>pdf[, <span class="st">&quot;x&quot;</span>],</span>
<span id="cb66-27"><a href="kernels-de-actividad.html#cb66-27" tabindex="-1"></a>        <span class="at">density =</span> act_obj<span class="sc">@</span>pdf[, <span class="st">&quot;y&quot;</span>],</span>
<span id="cb66-28"><a href="kernels-de-actividad.html#cb66-28" tabindex="-1"></a>        <span class="at">category =</span> category</span>
<span id="cb66-29"><a href="kernels-de-actividad.html#cb66-29" tabindex="-1"></a>      )</span>
<span id="cb66-30"><a href="kernels-de-actividad.html#cb66-30" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb66-31"><a href="kernels-de-actividad.html#cb66-31" tabindex="-1"></a>      <span class="fu">data.frame</span>(</span>
<span id="cb66-32"><a href="kernels-de-actividad.html#cb66-32" tabindex="-1"></a>        <span class="at">angle =</span> <span class="fu">numeric</span>(<span class="dv">0</span>),</span>
<span id="cb66-33"><a href="kernels-de-actividad.html#cb66-33" tabindex="-1"></a>        <span class="at">density =</span> <span class="fu">numeric</span>(<span class="dv">0</span>),</span>
<span id="cb66-34"><a href="kernels-de-actividad.html#cb66-34" tabindex="-1"></a>        <span class="at">category =</span> <span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb66-35"><a href="kernels-de-actividad.html#cb66-35" tabindex="-1"></a>      )</span>
<span id="cb66-36"><a href="kernels-de-actividad.html#cb66-36" tabindex="-1"></a>    }</span>
<span id="cb66-37"><a href="kernels-de-actividad.html#cb66-37" tabindex="-1"></a>  }</span>
<span id="cb66-38"><a href="kernels-de-actividad.html#cb66-38" tabindex="-1"></a></span>
<span id="cb66-39"><a href="kernels-de-actividad.html#cb66-39" tabindex="-1"></a>  <span class="co"># Extraer los pdf para cada categoría</span></span>
<span id="cb66-40"><a href="kernels-de-actividad.html#cb66-40" tabindex="-1"></a>  density_data_0 <span class="ot">&lt;-</span> <span class="fu">extract_pdf</span>(act_0, <span class="st">&quot;0&quot;</span>)</span>
<span id="cb66-41"><a href="kernels-de-actividad.html#cb66-41" tabindex="-1"></a>  density_data_above_0 <span class="ot">&lt;-</span> <span class="fu">extract_pdf</span>(act_above_0, <span class="st">&quot;1&quot;</span>)</span>
<span id="cb66-42"><a href="kernels-de-actividad.html#cb66-42" tabindex="-1"></a></span>
<span id="cb66-43"><a href="kernels-de-actividad.html#cb66-43" tabindex="-1"></a>  <span class="co"># Combinar los dataframes de densidad en uno solo</span></span>
<span id="cb66-44"><a href="kernels-de-actividad.html#cb66-44" tabindex="-1"></a>  density_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(density_data_0, density_data_above_0)</span>
<span id="cb66-45"><a href="kernels-de-actividad.html#cb66-45" tabindex="-1"></a>  </span>
<span id="cb66-46"><a href="kernels-de-actividad.html#cb66-46" tabindex="-1"></a>  <span class="co"># Devolver tanto la tabla de densidad como la tabla original con la categoría</span></span>
<span id="cb66-47"><a href="kernels-de-actividad.html#cb66-47" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb66-48"><a href="kernels-de-actividad.html#cb66-48" tabindex="-1"></a>    <span class="at">density_data =</span> density_data,</span>
<span id="cb66-49"><a href="kernels-de-actividad.html#cb66-49" tabindex="-1"></a>    <span class="at">categorized_data =</span> data <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!!</span><span class="fu">sym</span>(var_name), cat)</span>
<span id="cb66-50"><a href="kernels-de-actividad.html#cb66-50" tabindex="-1"></a>  ))</span>
<span id="cb66-51"><a href="kernels-de-actividad.html#cb66-51" tabindex="-1"></a>}</span></code></pre></div>
<p>Se aplica la función para cada variable de interés.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="kernels-de-actividad.html#cb67-1" tabindex="-1"></a><span class="co"># Generalización para todas las especies y variables</span></span>
<span id="cb67-2"><a href="kernels-de-actividad.html#cb67-2" tabindex="-1"></a>generalized_density_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="kernels-de-actividad.html#cb67-3" tabindex="-1"></a>  <span class="fu">group_by</span>(sp) <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="kernels-de-actividad.html#cb67-4" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb67-5"><a href="kernels-de-actividad.html#cb67-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-6"><a href="kernels-de-actividad.html#cb67-6" tabindex="-1"></a>    <span class="at">density_tr_btau_sys =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">calculate_density</span>(.x, <span class="st">&quot;tr_btau_sys&quot;</span>)),</span>
<span id="cb67-7"><a href="kernels-de-actividad.html#cb67-7" tabindex="-1"></a>    <span class="at">density_n_tech_sys =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">calculate_density</span>(.x, <span class="st">&quot;n_tech_sys&quot;</span>)),</span>
<span id="cb67-8"><a href="kernels-de-actividad.html#cb67-8" tabindex="-1"></a>    <span class="at">density_tr_cfam_sys =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">calculate_density</span>(.x, <span class="st">&quot;tr_cfam_sys&quot;</span>))</span>
<span id="cb67-9"><a href="kernels-de-actividad.html#cb67-9" tabindex="-1"></a>  )</span>
<span id="cb67-10"><a href="kernels-de-actividad.html#cb67-10" tabindex="-1"></a><span class="fu">save</span>(generalized_density_data, <span class="at">file=</span><span class="st">&quot;./data_processed/generalized_density_data.Rdata&quot;</span>)</span></code></pre></div>
<p>Breve explicación del código:</p>
<ul>
<li>Este código calcula densidades de actividad en horario solar para diferentes especies de mamíferos en función de tres variables (tr_btau_sys, tr_cfam_sys, n_tech_sys).</li>
<li><em>Extracción de pdf</em>: Si el ajuste es válido (i.e., si la densidad es representada por una matriz), se extraen las coordenadas x y y del pdf que representa la densidad para la categoría dada.</li>
<li>El objeto <em>generalized_density_data</em> contiene las densidades calculadas para cada especie (sp) y para cada una de las tres variables (tr_btau_sys, tr_cfam_sys, n_tech_sys), estructuradas en forma de tablas anidadas.</li>
</ul>
<p>Por ejemplo estos son los primeros diez valores para luego graficar la densidad de kernel para Dnov frente al estresor de ganado vacuno. En <code>category</code> se tiene ausencia cuando es igual a cero y presencia igual a uno.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="kernels-de-actividad.html#cb68-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;./data_processed/generalized_density_data.Rdata&quot;</span>)</span>
<span id="cb68-2"><a href="kernels-de-actividad.html#cb68-2" tabindex="-1"></a><span class="fu">paged_table</span>(<span class="fu">head</span>(generalized_density_data[[<span class="dv">1</span>,<span class="dv">3</span>]][[<span class="dv">1</span>]]<span class="sc">$</span>density_data))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["angle"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["density"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["category"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"0.00000000","2":"0.3745620","3":"0","_rn_":"1"},{"1":"0.01227185","2":"0.3726669","3":"0","_rn_":"2"},{"1":"0.02454369","2":"0.3706622","3":"0","_rn_":"3"},{"1":"0.03681554","2":"0.3685523","3":"0","_rn_":"4"},{"1":"0.04908739","2":"0.3663419","3":"0","_rn_":"5"},{"1":"0.06135923","2":"0.3640363","3":"0","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="diseño-y-generación-de-gráficos" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Diseño y generación de gráficos<a href="kernels-de-actividad.html#diseño-y-generación-de-gráficos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ahora utilicemos los datos descritos para realizar los gráficos. En primer lugar se diseña un gráfico y se almacena en una función.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="kernels-de-actividad.html#cb69-1" tabindex="-1"></a><span class="co"># Función para crear el gráfico</span></span>
<span id="cb69-2"><a href="kernels-de-actividad.html#cb69-2" tabindex="-1"></a>create_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, title, subtitle, species_name) {</span>
<span id="cb69-3"><a href="kernels-de-actividad.html#cb69-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(data[[<span class="dv">1</span>]], <span class="fu">aes</span>(<span class="at">x =</span> angle)) <span class="sc">+</span></span>
<span id="cb69-4"><a href="kernels-de-actividad.html#cb69-4" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> density, <span class="at">color =</span> category), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb69-5"><a href="kernels-de-actividad.html#cb69-5" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, pi<span class="sc">/</span><span class="dv">2</span>, pi, <span class="dv">3</span><span class="sc">*</span>pi<span class="sc">/</span><span class="dv">2</span>, <span class="dv">2</span><span class="sc">*</span>pi), </span>
<span id="cb69-6"><a href="kernels-de-actividad.html#cb69-6" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;00&quot;</span>, <span class="st">&quot;06&quot;</span>, <span class="st">&quot;12&quot;</span>, <span class="st">&quot;18&quot;</span>, <span class="st">&quot;24&quot;</span>)) <span class="sc">+</span></span>
<span id="cb69-7"><a href="kernels-de-actividad.html#cb69-7" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(title, <span class="st">&quot;- Especie: &quot;</span>, species_name), </span>
<span id="cb69-8"><a href="kernels-de-actividad.html#cb69-8" tabindex="-1"></a>           <span class="at">subtitle =</span> subtitle,</span>
<span id="cb69-9"><a href="kernels-de-actividad.html#cb69-9" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">&quot;Hora solar&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Densidad&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-10"><a href="kernels-de-actividad.html#cb69-10" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb69-11"><a href="kernels-de-actividad.html#cb69-11" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-12"><a href="kernels-de-actividad.html#cb69-12" tabindex="-1"></a>          <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-13"><a href="kernels-de-actividad.html#cb69-13" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-14"><a href="kernels-de-actividad.html#cb69-14" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;#9999CC&quot;</span>, <span class="st">&quot;#CC6666&quot;</span>))</span>
<span id="cb69-15"><a href="kernels-de-actividad.html#cb69-15" tabindex="-1"></a>}</span></code></pre></div>
<p>Y aplicamos esa función a los datos.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="kernels-de-actividad.html#cb70-1" tabindex="-1"></a><span class="co"># Lista para almacenar los gráficos</span></span>
<span id="cb70-2"><a href="kernels-de-actividad.html#cb70-2" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb70-3"><a href="kernels-de-actividad.html#cb70-3" tabindex="-1"></a></span>
<span id="cb70-4"><a href="kernels-de-actividad.html#cb70-4" tabindex="-1"></a><span class="cf">for</span> (sp <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(generalized_density_data)) {</span>
<span id="cb70-5"><a href="kernels-de-actividad.html#cb70-5" tabindex="-1"></a>  <span class="co"># Datos y títulos</span></span>
<span id="cb70-6"><a href="kernels-de-actividad.html#cb70-6" tabindex="-1"></a>  datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb70-7"><a href="kernels-de-actividad.html#cb70-7" tabindex="-1"></a>    <span class="fu">list</span>(generalized_density_data<span class="sc">$</span>density_tr_cfam_sys[[sp]], </span>
<span id="cb70-8"><a href="kernels-de-actividad.html#cb70-8" tabindex="-1"></a>         <span class="st">&quot;Estresor: Perros domésticos&quot;</span>),</span>
<span id="cb70-9"><a href="kernels-de-actividad.html#cb70-9" tabindex="-1"></a>    <span class="fu">list</span>(generalized_density_data<span class="sc">$</span>density_tr_btau_sys[[sp]], </span>
<span id="cb70-10"><a href="kernels-de-actividad.html#cb70-10" tabindex="-1"></a>         <span class="st">&quot;Estresor: Ganado vacuno&quot;</span>),</span>
<span id="cb70-11"><a href="kernels-de-actividad.html#cb70-11" tabindex="-1"></a>    <span class="fu">list</span>(generalized_density_data<span class="sc">$</span>density_n_tech_sys[[sp]], </span>
<span id="cb70-12"><a href="kernels-de-actividad.html#cb70-12" tabindex="-1"></a>         <span class="st">&quot;Estresor: Densidad humana&quot;</span>)</span>
<span id="cb70-13"><a href="kernels-de-actividad.html#cb70-13" tabindex="-1"></a>  )</span>
<span id="cb70-14"><a href="kernels-de-actividad.html#cb70-14" tabindex="-1"></a>  </span>
<span id="cb70-15"><a href="kernels-de-actividad.html#cb70-15" tabindex="-1"></a>  <span class="co"># Nombre de la especie (por ejemplo, puede ser el valor en sp)</span></span>
<span id="cb70-16"><a href="kernels-de-actividad.html#cb70-16" tabindex="-1"></a>  species_name <span class="ot">&lt;-</span> generalized_density_data[[<span class="dv">1</span>]][sp]</span>
<span id="cb70-17"><a href="kernels-de-actividad.html#cb70-17" tabindex="-1"></a>  </span>
<span id="cb70-18"><a href="kernels-de-actividad.html#cb70-18" tabindex="-1"></a>  <span class="co"># Generar los gráficos individuales</span></span>
<span id="cb70-19"><a href="kernels-de-actividad.html#cb70-19" tabindex="-1"></a>  individual_plots <span class="ot">&lt;-</span> <span class="fu">lapply</span>(datasets, <span class="cf">function</span>(data) {</span>
<span id="cb70-20"><a href="kernels-de-actividad.html#cb70-20" tabindex="-1"></a>    n_registros <span class="ot">&lt;-</span> data[[<span class="dv">1</span>]][[<span class="dv">2</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb70-21"><a href="kernels-de-actividad.html#cb70-21" tabindex="-1"></a>      <span class="fu">group_by</span>(cat) <span class="sc">%&gt;%</span> </span>
<span id="cb70-22"><a href="kernels-de-actividad.html#cb70-22" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb70-23"><a href="kernels-de-actividad.html#cb70-23" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">glue</span>(<span class="st">&quot;{cat}={n}&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb70-24"><a href="kernels-de-actividad.html#cb70-24" tabindex="-1"></a>      <span class="fu">pull</span>(text) <span class="sc">%&gt;%</span></span>
<span id="cb70-25"><a href="kernels-de-actividad.html#cb70-25" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-26"><a href="kernels-de-actividad.html#cb70-26" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="st">&quot;n: &quot;</span>, .)</span>
<span id="cb70-27"><a href="kernels-de-actividad.html#cb70-27" tabindex="-1"></a>    </span>
<span id="cb70-28"><a href="kernels-de-actividad.html#cb70-28" tabindex="-1"></a>    <span class="co"># Pasar el nombre de la especie a la función de creación del gráfico</span></span>
<span id="cb70-29"><a href="kernels-de-actividad.html#cb70-29" tabindex="-1"></a>    <span class="fu">create_plot</span>(data[[<span class="dv">1</span>]], data[[<span class="dv">2</span>]], n_registros, species_name)</span>
<span id="cb70-30"><a href="kernels-de-actividad.html#cb70-30" tabindex="-1"></a>  })</span>
<span id="cb70-31"><a href="kernels-de-actividad.html#cb70-31" tabindex="-1"></a>  </span>
<span id="cb70-32"><a href="kernels-de-actividad.html#cb70-32" tabindex="-1"></a>  <span class="co"># Almacenar los gráficos en la lista</span></span>
<span id="cb70-33"><a href="kernels-de-actividad.html#cb70-33" tabindex="-1"></a>  plots[[<span class="fu">length</span>(plots) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> individual_plots[[<span class="dv">1</span>]]</span>
<span id="cb70-34"><a href="kernels-de-actividad.html#cb70-34" tabindex="-1"></a>  plots[[<span class="fu">length</span>(plots) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> individual_plots[[<span class="dv">2</span>]]</span>
<span id="cb70-35"><a href="kernels-de-actividad.html#cb70-35" tabindex="-1"></a>  plots[[<span class="fu">length</span>(plots) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> individual_plots[[<span class="dv">3</span>]]</span>
<span id="cb70-36"><a href="kernels-de-actividad.html#cb70-36" tabindex="-1"></a>}</span></code></pre></div>
<p>Por ejemplo, aquí se puede visualizar el plot de <em>D. novemcinctus</em></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="kernels-de-actividad.html#cb71-1" tabindex="-1"></a>plots[[<span class="dv">1</span>]]</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<p><a href="anexo-1">En este anexo se pueden visualizar todos los gráficos.</a></p>
</div>
<div id="calculos-de-overlap" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Calculos de overlap<a href="kernels-de-actividad.html#calculos-de-overlap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En este apartado se calculará el valor de overlap, tanto <code>dhat1</code> como <code>dhat4</code>, utilizando bootstrap para generar intervalos de confianza. Además, se calcula el test de Watson, para evaluar si las densidades son significativamente distintas.</p>
<p>En primer lugar, preparamos los datos y creamos categorías para cada variable.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="kernels-de-actividad.html#cb72-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data_processed/datos_procesados_v4.RData&quot;</span>)</span>
<span id="cb72-2"><a href="kernels-de-actividad.html#cb72-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ctho&quot;</span>, <span class="st">&quot;Lgym&quot;</span>, <span class="st">&quot;Lgeo&quot;</span>, <span class="st">&quot;Lwie&quot;</span>, <span class="st">&quot;Dnov&quot;</span>, <span class="st">&quot;Dsep&quot;</span>, <span class="st">&quot;Aaxi&quot;</span>, <span class="st">&quot;Mgou&quot;</span>))</span>
<span id="cb72-3"><a href="kernels-de-actividad.html#cb72-3" tabindex="-1"></a></span>
<span id="cb72-4"><a href="kernels-de-actividad.html#cb72-4" tabindex="-1"></a>data_categorized <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb72-5"><a href="kernels-de-actividad.html#cb72-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cat_n_tech_sys =</span> <span class="fu">case_when</span>(</span>
<span id="cb72-6"><a href="kernels-de-actividad.html#cb72-6" tabindex="-1"></a>    n_tech_sys <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb72-7"><a href="kernels-de-actividad.html#cb72-7" tabindex="-1"></a>    n_tech_sys <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb72-8"><a href="kernels-de-actividad.html#cb72-8" tabindex="-1"></a>  ),</span>
<span id="cb72-9"><a href="kernels-de-actividad.html#cb72-9" tabindex="-1"></a>  <span class="at">cat_tr_cfam_sys =</span> <span class="fu">case_when</span>(</span>
<span id="cb72-10"><a href="kernels-de-actividad.html#cb72-10" tabindex="-1"></a>    tr_cfam_sys <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb72-11"><a href="kernels-de-actividad.html#cb72-11" tabindex="-1"></a>    tr_cfam_sys <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb72-12"><a href="kernels-de-actividad.html#cb72-12" tabindex="-1"></a>  ),</span>
<span id="cb72-13"><a href="kernels-de-actividad.html#cb72-13" tabindex="-1"></a>  <span class="at">cat_tr_btau_sys =</span> <span class="fu">case_when</span>(</span>
<span id="cb72-14"><a href="kernels-de-actividad.html#cb72-14" tabindex="-1"></a>    tr_btau_sys <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb72-15"><a href="kernels-de-actividad.html#cb72-15" tabindex="-1"></a>    tr_btau_sys <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;1&quot;</span></span>
<span id="cb72-16"><a href="kernels-de-actividad.html#cb72-16" tabindex="-1"></a>  )</span>
<span id="cb72-17"><a href="kernels-de-actividad.html#cb72-17" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb72-18"><a href="kernels-de-actividad.html#cb72-18" tabindex="-1"></a>  <span class="fu">select</span>(site, system, camera, solar, sp, cat_n_tech_sys, cat_tr_cfam_sys,cat_tr_btau_sys)</span></code></pre></div>
<p>Con el siguiente bloque de código se calcula simultáneamente el overlap, bootstrap y el test de watson.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="kernels-de-actividad.html#cb73-1" tabindex="-1"></a>species <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="kernels-de-actividad.html#cb73-2" tabindex="-1"></a>  <span class="fu">select</span>(sp) <span class="sc">%&gt;%</span> </span>
<span id="cb73-3"><a href="kernels-de-actividad.html#cb73-3" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-4"><a href="kernels-de-actividad.html#cb73-4" tabindex="-1"></a>  <span class="fu">pull</span>()</span>
<span id="cb73-5"><a href="kernels-de-actividad.html#cb73-5" tabindex="-1"></a></span>
<span id="cb73-6"><a href="kernels-de-actividad.html#cb73-6" tabindex="-1"></a>categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;cat_n_tech_sys&quot;</span>, <span class="st">&quot;cat_tr_cfam_sys&quot;</span>, <span class="st">&quot;cat_tr_btau_sys&quot;</span>)</span>
<span id="cb73-7"><a href="kernels-de-actividad.html#cb73-7" tabindex="-1"></a></span>
<span id="cb73-8"><a href="kernels-de-actividad.html#cb73-8" tabindex="-1"></a><span class="co"># Crear un data.frame vacío para almacenar los resultados de manera acumulativa</span></span>
<span id="cb73-9"><a href="kernels-de-actividad.html#cb73-9" tabindex="-1"></a>results_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb73-10"><a href="kernels-de-actividad.html#cb73-10" tabindex="-1"></a>  <span class="at">sp =</span> <span class="fu">character</span>(),</span>
<span id="cb73-11"><a href="kernels-de-actividad.html#cb73-11" tabindex="-1"></a>  <span class="at">cat =</span> <span class="fu">character</span>(),</span>
<span id="cb73-12"><a href="kernels-de-actividad.html#cb73-12" tabindex="-1"></a>  <span class="at">dhat_1 =</span> <span class="fu">numeric</span>(),</span>
<span id="cb73-13"><a href="kernels-de-actividad.html#cb73-13" tabindex="-1"></a>  <span class="at">dhat_4 =</span> <span class="fu">numeric</span>(),</span>
<span id="cb73-14"><a href="kernels-de-actividad.html#cb73-14" tabindex="-1"></a>  <span class="at">perc_lower =</span> <span class="fu">numeric</span>(),</span>
<span id="cb73-15"><a href="kernels-de-actividad.html#cb73-15" tabindex="-1"></a>  <span class="at">perc_upper =</span> <span class="fu">numeric</span>(),</span>
<span id="cb73-16"><a href="kernels-de-actividad.html#cb73-16" tabindex="-1"></a>  <span class="at">watson_results =</span> <span class="fu">numeric</span>(),</span>
<span id="cb73-17"><a href="kernels-de-actividad.html#cb73-17" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb73-18"><a href="kernels-de-actividad.html#cb73-18" tabindex="-1"></a>)</span>
<span id="cb73-19"><a href="kernels-de-actividad.html#cb73-19" tabindex="-1"></a></span>
<span id="cb73-20"><a href="kernels-de-actividad.html#cb73-20" tabindex="-1"></a><span class="co"># Iterar sobre las especies</span></span>
<span id="cb73-21"><a href="kernels-de-actividad.html#cb73-21" tabindex="-1"></a><span class="cf">for</span> (sp_name <span class="cf">in</span> species) {</span>
<span id="cb73-22"><a href="kernels-de-actividad.html#cb73-22" tabindex="-1"></a>  <span class="co"># Iterar sobre cada categoría</span></span>
<span id="cb73-23"><a href="kernels-de-actividad.html#cb73-23" tabindex="-1"></a>  <span class="cf">for</span> (col <span class="cf">in</span> categories) {</span>
<span id="cb73-24"><a href="kernels-de-actividad.html#cb73-24" tabindex="-1"></a>    <span class="fu">print</span>(sp_name)</span>
<span id="cb73-25"><a href="kernels-de-actividad.html#cb73-25" tabindex="-1"></a>    </span>
<span id="cb73-26"><a href="kernels-de-actividad.html#cb73-26" tabindex="-1"></a>    <span class="co"># Filtrar datos para cada categoría y especie</span></span>
<span id="cb73-27"><a href="kernels-de-actividad.html#cb73-27" tabindex="-1"></a>    dat0 <span class="ot">&lt;-</span> data_categorized <span class="sc">%&gt;%</span> </span>
<span id="cb73-28"><a href="kernels-de-actividad.html#cb73-28" tabindex="-1"></a>      <span class="fu">filter</span>(sp <span class="sc">==</span> sp_name <span class="sc">&amp;</span> <span class="sc">!!</span><span class="fu">sym</span>(col) <span class="sc">==</span> <span class="st">&quot;0&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-29"><a href="kernels-de-actividad.html#cb73-29" tabindex="-1"></a>      <span class="fu">pull</span>(solar)</span>
<span id="cb73-30"><a href="kernels-de-actividad.html#cb73-30" tabindex="-1"></a>    dat1 <span class="ot">&lt;-</span> data_categorized <span class="sc">%&gt;%</span> </span>
<span id="cb73-31"><a href="kernels-de-actividad.html#cb73-31" tabindex="-1"></a>      <span class="fu">filter</span>(sp <span class="sc">==</span> sp_name <span class="sc">&amp;</span> <span class="sc">!!</span><span class="fu">sym</span>(col) <span class="sc">==</span> <span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-32"><a href="kernels-de-actividad.html#cb73-32" tabindex="-1"></a>      <span class="fu">pull</span>(solar)</span>
<span id="cb73-33"><a href="kernels-de-actividad.html#cb73-33" tabindex="-1"></a>    </span>
<span id="cb73-34"><a href="kernels-de-actividad.html#cb73-34" tabindex="-1"></a>    <span class="co"># Calculo de overlap</span></span>
<span id="cb73-35"><a href="kernels-de-actividad.html#cb73-35" tabindex="-1"></a>    overlap_01 <span class="ot">&lt;-</span> <span class="fu">overlapEst</span>(dat0, dat1)</span>
<span id="cb73-36"><a href="kernels-de-actividad.html#cb73-36" tabindex="-1"></a>    boot_0 <span class="ot">&lt;-</span> <span class="fu">resample</span>(dat0, <span class="dv">10000</span>)</span>
<span id="cb73-37"><a href="kernels-de-actividad.html#cb73-37" tabindex="-1"></a>    boot_1 <span class="ot">&lt;-</span> <span class="fu">resample</span>(dat1, <span class="dv">10000</span>)</span>
<span id="cb73-38"><a href="kernels-de-actividad.html#cb73-38" tabindex="-1"></a>    boot_est_01 <span class="ot">&lt;-</span> <span class="fu">bootEst</span>(boot_0, boot_1)</span>
<span id="cb73-39"><a href="kernels-de-actividad.html#cb73-39" tabindex="-1"></a>    results <span class="ot">&lt;-</span> <span class="fu">bootCI</span>(boot_est_01[<span class="dv">2</span>], boot_est_01[,<span class="dv">2</span>])</span>
<span id="cb73-40"><a href="kernels-de-actividad.html#cb73-40" tabindex="-1"></a>    </span>
<span id="cb73-41"><a href="kernels-de-actividad.html#cb73-41" tabindex="-1"></a>    <span class="co"># Test Watson</span></span>
<span id="cb73-42"><a href="kernels-de-actividad.html#cb73-42" tabindex="-1"></a>    dat_0_circular <span class="ot">&lt;-</span> <span class="fu">circular</span>(dat0, <span class="at">units =</span> <span class="st">&quot;radians&quot;</span>, <span class="at">modulo =</span> <span class="st">&quot;2pi&quot;</span>)</span>
<span id="cb73-43"><a href="kernels-de-actividad.html#cb73-43" tabindex="-1"></a>    dat_1_circular <span class="ot">&lt;-</span> <span class="fu">circular</span>(dat1, <span class="at">units =</span> <span class="st">&quot;radians&quot;</span>, <span class="at">modulo =</span> <span class="st">&quot;2pi&quot;</span>)</span>
<span id="cb73-44"><a href="kernels-de-actividad.html#cb73-44" tabindex="-1"></a>    watson_result <span class="ot">&lt;-</span> <span class="fu">watson.two.test</span>(dat_0_circular, dat_1_circular)</span>
<span id="cb73-45"><a href="kernels-de-actividad.html#cb73-45" tabindex="-1"></a>    </span>
<span id="cb73-46"><a href="kernels-de-actividad.html#cb73-46" tabindex="-1"></a>    <span class="co"># Agregar el resultado como una nueva fila al data.frame</span></span>
<span id="cb73-47"><a href="kernels-de-actividad.html#cb73-47" tabindex="-1"></a>    results_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb73-48"><a href="kernels-de-actividad.html#cb73-48" tabindex="-1"></a>      results_df,</span>
<span id="cb73-49"><a href="kernels-de-actividad.html#cb73-49" tabindex="-1"></a>      <span class="fu">data.frame</span>(</span>
<span id="cb73-50"><a href="kernels-de-actividad.html#cb73-50" tabindex="-1"></a>        <span class="at">sp =</span> sp_name, </span>
<span id="cb73-51"><a href="kernels-de-actividad.html#cb73-51" tabindex="-1"></a>        <span class="at">cat =</span> col, </span>
<span id="cb73-52"><a href="kernels-de-actividad.html#cb73-52" tabindex="-1"></a>        <span class="at">dhat_1 =</span> overlap_01[<span class="dv">1</span>],</span>
<span id="cb73-53"><a href="kernels-de-actividad.html#cb73-53" tabindex="-1"></a>        <span class="at">dhat_4 =</span> overlap_01[<span class="dv">2</span>],</span>
<span id="cb73-54"><a href="kernels-de-actividad.html#cb73-54" tabindex="-1"></a>        <span class="at">perc_lower =</span> results[<span class="st">&quot;perc&quot;</span>, <span class="dv">1</span>], </span>
<span id="cb73-55"><a href="kernels-de-actividad.html#cb73-55" tabindex="-1"></a>        <span class="at">perc_upper =</span> results[<span class="st">&quot;perc&quot;</span>, <span class="dv">2</span>],</span>
<span id="cb73-56"><a href="kernels-de-actividad.html#cb73-56" tabindex="-1"></a>        <span class="at">watson_results =</span> watson_result<span class="sc">$</span>statistic,</span>
<span id="cb73-57"><a href="kernels-de-actividad.html#cb73-57" tabindex="-1"></a>        <span class="at">row.names =</span> <span class="cn">NULL</span>  <span class="co"># Eliminar nombres de las filas en cada unión</span></span>
<span id="cb73-58"><a href="kernels-de-actividad.html#cb73-58" tabindex="-1"></a>      )</span>
<span id="cb73-59"><a href="kernels-de-actividad.html#cb73-59" tabindex="-1"></a>    )</span>
<span id="cb73-60"><a href="kernels-de-actividad.html#cb73-60" tabindex="-1"></a>    </span>
<span id="cb73-61"><a href="kernels-de-actividad.html#cb73-61" tabindex="-1"></a>    <span class="co"># Imprimir el porcentaje</span></span>
<span id="cb73-62"><a href="kernels-de-actividad.html#cb73-62" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Species:&quot;</span>, sp_name, <span class="st">&quot;, Category:&quot;</span>, col))</span>
<span id="cb73-63"><a href="kernels-de-actividad.html#cb73-63" tabindex="-1"></a>  }</span>
<span id="cb73-64"><a href="kernels-de-actividad.html#cb73-64" tabindex="-1"></a>}</span>
<span id="cb73-65"><a href="kernels-de-actividad.html#cb73-65" tabindex="-1"></a></span>
<span id="cb73-66"><a href="kernels-de-actividad.html#cb73-66" tabindex="-1"></a><span class="co"># Mostrar el data.frame final de resultados</span></span>
<span id="cb73-67"><a href="kernels-de-actividad.html#cb73-67" tabindex="-1"></a><span class="fu">print</span>(results_df)</span>
<span id="cb73-68"><a href="kernels-de-actividad.html#cb73-68" tabindex="-1"></a></span>
<span id="cb73-69"><a href="kernels-de-actividad.html#cb73-69" tabindex="-1"></a><span class="fu">save</span>(results_df, <span class="at">file=</span><span class="st">&quot;data_processed/results_df_overlap.Rdata&quot;</span>)</span></code></pre></div>
<p>Y se obtiene una tabla de resultados, donde se especifica el dhat1, dhat4, el percentil menor y el mayor, además el pvalor del test de watson.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="kernels-de-actividad.html#cb74-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data_processed/results_df_overlap.Rdata&quot;</span>)</span>
<span id="cb74-2"><a href="kernels-de-actividad.html#cb74-2" tabindex="-1"></a><span class="fu">paged_table</span>(results_df)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sp"],"name":[1],"type":["chr"],"align":["left"]},{"label":["cat"],"name":[2],"type":["chr"],"align":["left"]},{"label":["dhat_1"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["dhat_4"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["perc_lower"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["perc_upper"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["watson_results"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Dnov","2":"cat_n_tech_sys","3":"0.9246732","4":"0.9305417","5":"0.74584050","6":"0.9355735","7":"0.02532730"},{"1":"Dnov","2":"cat_tr_cfam_sys","3":"0.8460968","4":"0.8520341","5":"0.72276042","6":"0.9180270","7":"0.13476619"},{"1":"Dnov","2":"cat_tr_btau_sys","3":"0.9142766","4":"0.9163462","5":"0.79264263","6":"0.9451330","7":"0.05059932"},{"1":"Mgou","2":"cat_n_tech_sys","3":"0.8674209","4":"0.8724947","5":"0.74917755","6":"0.9191308","7":"0.07896670"},{"1":"Mgou","2":"cat_tr_cfam_sys","3":"0.8475462","4":"0.8439468","5":"0.73553642","6":"0.9079156","7":"0.16024229"},{"1":"Mgou","2":"cat_tr_btau_sys","3":"0.7954351","4":"0.7967511","5":"0.69765924","6":"0.8731591","7":"0.33709710"},{"1":"Lgym","2":"cat_n_tech_sys","3":"0.8444306","4":"0.8472184","5":"0.74436817","6":"0.9134080","7":"0.10628607"},{"1":"Lgym","2":"cat_tr_cfam_sys","3":"0.8578636","4":"0.8620699","5":"0.79697266","6":"0.9215729","7":"0.39466781"},{"1":"Lgym","2":"cat_tr_btau_sys","3":"0.8613680","4":"0.8555321","5":"0.78477717","6":"0.9190026","7":"0.23666015"},{"1":"Ctho","2":"cat_n_tech_sys","3":"0.8431639","4":"0.8453569","5":"0.76434586","6":"0.8973160","7":"0.25165152"},{"1":"Ctho","2":"cat_tr_cfam_sys","3":"0.8748362","4":"0.8749168","5":"0.77586686","6":"0.9171230","7":"0.13324006"},{"1":"Ctho","2":"cat_tr_btau_sys","3":"0.8690065","4":"0.8672415","5":"0.77931097","6":"0.9205822","7":"0.22138850"},{"1":"Lgeo","2":"cat_n_tech_sys","3":"0.7338596","4":"0.7200743","5":"0.57323218","6":"0.8591829","7":"0.09499049"},{"1":"Lgeo","2":"cat_tr_cfam_sys","3":"0.8352362","4":"0.8386582","5":"0.63949413","6":"0.8993131","7":"0.09318147"},{"1":"Lgeo","2":"cat_tr_btau_sys","3":"0.7294060","4":"0.7161302","5":"0.57038918","6":"0.8590343","7":"0.12220636"},{"1":"Lwie","2":"cat_n_tech_sys","3":"0.8314699","4":"0.8499395","5":"0.45326210","6":"0.8608654","7":"0.02770563"},{"1":"Lwie","2":"cat_tr_cfam_sys","3":"0.5730502","4":"0.5589835","5":"0.18282926","6":"0.7642633","7":"0.06472303"},{"1":"Lwie","2":"cat_tr_btau_sys","3":"0.7557661","4":"0.7804176","5":"0.45561041","6":"0.8465332","7":"0.07988338"},{"1":"Aaxi","2":"cat_n_tech_sys","3":"0.8637913","4":"0.8649728","5":"0.78002761","6":"0.9099510","7":"0.25262804"},{"1":"Aaxi","2":"cat_tr_cfam_sys","3":"0.8749080","4":"0.8761229","5":"0.77254913","6":"0.9260493","7":"0.17985594"},{"1":"Aaxi","2":"cat_tr_btau_sys","3":"0.8128767","4":"0.8091528","5":"0.74013893","6":"0.8808323","7":"0.58651934"},{"1":"Dsep","2":"cat_n_tech_sys","3":"0.5924725","4":"0.5650478","5":"0.09036888","6":"0.7215821","7":"0.07550783"},{"1":"Dsep","2":"cat_tr_cfam_sys","3":"0.7161746","4":"0.7154808","5":"0.54756087","6":"0.8457138","7":"0.29110251"},{"1":"Dsep","2":"cat_tr_btau_sys","3":"0.7920477","4":"0.8009199","5":"0.59119591","6":"0.8816198","7":"0.12775730"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="variables-climáticas.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploración-general-de-modelos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/chapters/kernels-actividad-variables.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
